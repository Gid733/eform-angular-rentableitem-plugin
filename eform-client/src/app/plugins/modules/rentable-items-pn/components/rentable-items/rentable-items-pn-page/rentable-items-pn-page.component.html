<subheader-pn [title]="'Rentable Items' | translate">
  <div class="p-3">
    <button *ngIf="currentRole == 'admin'"
            class="btn btn-danger text-black-50 btn-icon"
            routerLink="settings"
            mdbTooltip="{{ 'Settings' | translate }}">
      <i class="material-icons">
        build
      </i>
    </button>
    <button
      id="rentableItemCreateBtn"
      class="btn btn-success"
      mdbTooltip="{{ 'Create rentable item' | translate }}"
      (click)="showCreateRentableItemModal()">{{ 'New rentable item' | translate }}
    </button>
  </div>
</subheader-pn>

<div class="container-fluid">
  <div class="row pl-1">
    <div class="col-md-2">
      <div class="md-form">
        <input mdbInputDirective [mdbValidate]="false"
               type="text" (input)="onSearchInputChanged($event.target.value)"
               class="form-control input-sm" id="searchInput">
        <label for="searchInput">{{'Search' | translate}}</label>
      </div>
    </div>
  </div>
  <div class="container-fluid">
    <div class="row p-1 mt-4 table-responsive no-gutters">
      <table class="table table-sm table-striped text-center z-depth-1">
        <thead>
        <tr>
          <th scope="col" class="table-header-sortable" id="idSort"
              (click)="sortByColumn('Id', rentableItemsRequestModel.isSortDsc = !rentableItemsRequestModel.isSortDsc)">
            <div class="d-flex align-items-center justify-content-center">
              ID
              <i class="material-icons text-black-50"
                 *ngIf="rentableItemsRequestModel.sortColumnName != 'Id'">unfold_more</i>
              <i class="material-icons"
                 *ngIf="rentableItemsRequestModel.sortColumnName == 'Id' && !rentableItemsRequestModel.isSortDsc">
                expand_less</i>
              <i class="material-icons"
                 *ngIf="rentableItemsRequestModel.sortColumnName == 'Id' && rentableItemsRequestModel.isSortDsc">expand_more</i>
            </div>
          </th>
          <th scope="col" class="table-header-sortable" id="brandSort"
              (click)="sortByColumn('Brand', rentableItemsRequestModel.isSortDsc = !rentableItemsRequestModel.isSortDsc)">
            <div class="d-flex align-items-center justify-content-center">
              {{ 'Brand' | translate }}
              <i class="material-icons text-black-50" *ngIf="rentableItemsRequestModel.sortColumnName != 'Brand'">unfold_more</i>
              <i class="material-icons"
                 *ngIf="rentableItemsRequestModel.sortColumnName == 'Brand' && !rentableItemsRequestModel.isSortDsc">
                expand_less</i>
              <i class="material-icons"
                 *ngIf="rentableItemsRequestModel.sortColumnName == 'Brand' && rentableItemsRequestModel.isSortDsc">expand_more</i>
            </div>
          </th>
          <th scope="col" class="table-header-sortable" id="modelSort"
              (click)="sortByColumn('ModelName', rentableItemsRequestModel.isSortDsc = !rentableItemsRequestModel.isSortDsc)">
            <div class="d-flex align-items-center justify-content-center">
              {{ 'Model' | translate }}
              <i class="material-icons text-black-50" *ngIf="rentableItemsRequestModel.sortColumnName != 'ModelName'">unfold_more</i>
              <i class="material-icons"
                 *ngIf="rentableItemsRequestModel.sortColumnName == 'ModelName' && !rentableItemsRequestModel.isSortDsc">
                expand_less</i>
              <i class="material-icons"
                 *ngIf="rentableItemsRequestModel.sortColumnName == 'ModelName' && rentableItemsRequestModel.isSortDsc">expand_more</i>
            </div>
          </th>
          <th scope="col" class="table-header-sortable" id="registerDateSort"
              (click)="sortByColumn('RegistrationDate', rentableItemsRequestModel.isSortDsc = !rentableItemsRequestModel.isSortDsc)">
            <div class="d-flex align-items-center justify-content-center">
              {{ 'Registration Date' | translate }}
              <i class="material-icons text-black-50" *ngIf="rentableItemsRequestModel.sortColumnName != 'RegistrationDate'">unfold_more</i>
              <i class="material-icons"
                 *ngIf="rentableItemsRequestModel.sortColumnName == 'RegistrationDate' && !rentableItemsRequestModel.isSortDsc">
                expand_less</i>
              <i class="material-icons"
                 *ngIf="rentableItemsRequestModel.sortColumnName == 'RegistrationDate' && rentableItemsRequestModel.isSortDsc">expand_more</i>
            </div>
          </th>
          <th scope="col" class="table-header-sortable" id="vinNumberSort"
              (click)="sortByColumn('VinNumber', rentableItemsRequestModel.isSortDsc = !rentableItemsRequestModel.isSortDsc)">
            <div class="d-flex align-items-center justify-content-center">
              {{ 'Vin Number' | translate }}
              <i class="material-icons text-black-50" *ngIf="rentableItemsRequestModel.sortColumnName != 'VinNumber'">unfold_more</i>
              <i class="material-icons"
                 *ngIf="rentableItemsRequestModel.sortColumnName == 'VinNumber' && !rentableItemsRequestModel.isSortDsc">
                expand_less</i>
              <i class="material-icons"
                 *ngIf="rentableItemsRequestModel.sortColumnName == 'VinNumber' && rentableItemsRequestModel.isSortDsc">expand_more</i>
            </div>
          </th>
          <th scope="col" class="table-header-sortable" id="serialNumberSort"
              (click)="sortByColumn('SerialNumber', rentableItemsRequestModel.isSortDsc = !rentableItemsRequestModel.isSortDsc)">
            <div class="d-flex align-items-center justify-content-center">
              {{ 'Serial Number' | translate }}
              <i class="material-icons text-black-50" *ngIf="rentableItemsRequestModel.sortColumnName != 'SerialNumber'">unfold_more</i>
              <i class="material-icons"
                 *ngIf="rentableItemsRequestModel.sortColumnName == 'SerialNumber' && !rentableItemsRequestModel.isSortDsc">
                expand_less</i>
              <i class="material-icons"
                 *ngIf="rentableItemsRequestModel.sortColumnName == 'SerialNumber' && rentableItemsRequestModel.isSortDsc">expand_more</i>
            </div>
          </th>
          <th scope="col" class="table-header-sortable" id="plateNumberSort"
              (click)="sortByColumn('PlateNumber', rentableItemsRequestModel.isSortDsc = !rentableItemsRequestModel.isSortDsc)">
            <div class="d-flex align-items-center justify-content-center">
              {{ 'Plate Number' | translate }}
              <i class="material-icons text-black-50" *ngIf="rentableItemsRequestModel.sortColumnName != 'PlateNumber'">unfold_more</i>
              <i class="material-icons"
                 *ngIf="rentableItemsRequestModel.sortColumnName == 'PlateNumber' && !rentableItemsRequestModel.isSortDsc">
                expand_less</i>
              <i class="material-icons"
                 *ngIf="rentableItemsRequestModel.sortColumnName == 'PlateNumber' && rentableItemsRequestModel.isSortDsc">expand_more</i>
            </div>
          </th>
          <th scope="col">
            {{ 'Actions' | translate }}
          </th>
        </tr>
        </thead>
        <tbody id="tableBody">
        <tr *ngFor="let rentableItem of rentableItemsModel?.rentableItems">
          <td id="rentableItemId">
            {{rentableItem.id}}
          </td>
          <td id="rentableItemBrand">
            {{rentableItem.brand}}
          </td>
          <td id="rentableItemModel">
            {{rentableItem.modelName}}
          </td>
          <td id="rentableItemRegistrationDate">
            {{rentableItem.registrationDate | date:'dd/MM/yyyy'}}
          </td>
          <td id="rentableItemVINNumber">
            {{rentableItem.vinNumber}}
          </td>
          <td id="rentableItemSerialNumber">
            {{rentableItem.serialNumber}}
          </td>
          <td id="rentableItemPlateNumber">
            {{rentableItem.plateNumber}}
          </td>
          <td>
            <div class="d-flex flex-row justify-content-center">
              <button class="btn btn-accent text-black-50 btn-icon mb-2"
                      mdbTooltip="{{ 'Edit rentable item' | translate }}"
                      (click)="showEditRentableItemModal(rentableItem)">
                <i class="material-icons">
                  edit
                </i>
              </button>
              <button class="btn btn-danger text-black-50 btn-icon mb-2"
                      mdbTooltip="{{'Delete rentable Item ' | translate}}"
                      (click)="showDeleteRentableItemModal(rentableItem)" >
                <i class="material-icons">
                  delete_forever
                </i>
              </button>
            </div>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
  <pagination-pn *ngIf="rentableItemsModel?.total > rentableItemsRequestModel.pageSize"
                 [limit]="rentableItemsRequestModel.pageSize"
                 [size]="rentableItemsModel.total"
                 [offset]="rentableItemsRequestModel.offset"
                 (onPageChanged)="changePage($event)"></pagination-pn>
</div>

<spinner-pn [spinnerVisibility]="spinnerStatus"></spinner-pn>

<app-rentable-items-pn-add #createRentableItemModal
                           (onRentableItemCreated)="getAllRentableItems()"></app-rentable-items-pn-add>
<app-rentable-items-pn-update #editRentableItemModal
                              (onRentableItemUpdated)="getAllRentableItems()"></app-rentable-items-pn-update>
<app-rentable-items-pn-delete #deleteRentableItemModal
                              (onRentableItemDeleted)="getAllRentableItems()"></app-rentable-items-pn-delete>
