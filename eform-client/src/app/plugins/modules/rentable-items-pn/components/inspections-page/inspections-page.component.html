<subheader-pn [title]="'Inspections' | translate">
  <div class="p-3">
    <button
      class="btn btn-success"
      mdbTooltip="{{'Create Inspection' | translate}}"
      (click)="showCreateInspectionModal()">
      {{'New Inspection'}}
    </button>
  </div>
</subheader-pn>

<div class="container-fluid">
  <div class="row p-3 table-responsive no-gutters">
    <table class="table table-sm table-striped text-center">
      <thead>
      <tr>
        <th scope="col" class="table-header-sortable" id="idSort"
            (click)="sortByColumn('Id', inspectionsRequestModel.isSortDsc = !inspectionsRequestModel.isSortDsc)">
          <div class="d-flex align-items-center justify-content-center">
            ID
            <i class="material-icons text-black-50" *ngIf="inspectionsRequestModel.sortColumnName != 'Id'">
              unfold_more</i>
            <i class="material-icons"
               *ngIf="inspectionsRequestModel.sortColumnName == 'Id' && !inspectionsRequestModel.isSortDsc">
              expand_less</i>
            <i class="material-icons"
               *ngIf="inspectionsRequestModel.sortColumnName == 'Id' && inspectionsRequestModel.isSortDsc">
              expand_more</i>
          </div>
        </th>
        <th scope="col" class="table-header-sortable" id="contractIdSort"
            (click)="sortByColumn('contractId', inspectionsRequestModel.isSortDsc = !inspectionsRequestModel.isSortDsc)">
          <div class="d-flex align-items-center justify-content-center">
            Contract Id
            <i class="material-icons text-black-50" *ngIf="inspectionsRequestModel.sortColumnName != 'contractId'">
              unfold_more</i>
            <i class="material-icons"
               *ngIf="inspectionsRequestModel.sortColumnName == 'contractId' && !inspectionsRequestModel.isSortDsc">
              expand_less</i>
            <i class="material-icons"
               *ngIf="inspectionsRequestModel.sortColumnName == 'contractId' && inspectionsRequestModel.isSortDsc">
              expand_more</i>
          </div>
        </th>
        <th scope="col" class="table-header-sortable" id="sdkCaseIdSort"
            (click)="sortByColumn('SdkCaseId', inspectionsRequestModel.isSortDsc = !inspectionsRequestModel.isSortDsc)">
          <div class="d-flex align-items-center justify-content-center">
            SDK Case Id
            <i class="material-icons text-black-50" *ngIf="inspectionsRequestModel.sortColumnName != 'SdkCaseId'">
              unfold_more</i>
            <i class="material-icons"
               *ngIf="inspectionsRequestModel.sortColumnName == 'SdkCaseId' && !inspectionsRequestModel.isSortDsc">
              expand_less</i>
            <i class="material-icons"
               *ngIf="inspectionsRequestModel.sortColumnName == 'SdkCaseId' && inspectionsRequestModel.isSortDsc">
              expand_more</i>
          </div>
        </th>
        <th scope="col" class="table-header-sortable" id="statusSort"
            (click)="sortByColumn('Status', inspectionsRequestModel.isSortDsc = !inspectionsRequestModel.isSortDsc)">
          <div class="d-flex align-items-center justify-content-center">
            Status
            <i class="material-icons text-black-50" *ngIf="inspectionsRequestModel.sortColumnName != 'Status'">
              unfold_more</i>
            <i class="material-icons"
               *ngIf="inspectionsRequestModel.sortColumnName == 'Status' && !inspectionsRequestModel.isSortDsc">
              expand_less</i>
            <i class="material-icons"
               *ngIf="inspectionsRequestModel.sortColumnName == 'Status' && inspectionsRequestModel.isSortDsc">
              expand_more</i>
          </div>
        </th>
        <th scope="col" class="table-header-sortable" id="doneAtSort"
            (click)="sortByColumn('doneAt', inspectionsRequestModel.isSortDsc = !inspectionsRequestModel.isSortDsc)">
          <div class="d-flex align-items-center justify-content-center">
            Done at
            <i class="material-icons text-black-50" *ngIf="inspectionsRequestModel.sortColumnName != 'doneAt'">
              unfold_more</i>
            <i class="material-icons"
               *ngIf="inspectionsRequestModel.sortColumnName == 'doneAt' && !inspectionsRequestModel.isSortDsc">
              expand_less</i>
            <i class="material-icons"
               *ngIf="inspectionsRequestModel.sortColumnName == 'doneAt' && inspectionsRequestModel.isSortDsc">
              expand_more</i>
          </div>
        </th>
        <th scope="col">
          {{ 'Actions' | translate }}
        </th>
      </tr>
      </thead>
      <tbody id="tableBody">
      <tr *ngFor="let inspection of inspectionsModel?.inspections">
        <td>
          {{inspection.id}}
        </td>
        <td>
          {{inspection.contractId}}
        </td>
        <td>
          {{inspection.SdkCaseId}}
        </td>
        <td>
          {{inspection.status}}
        </td>
        <td>
          {{inspection.doneAt | date:'dd/MM/yyyy'}}
        </td>
        <td>
          <div class="d-flex flex-row justify-content-center">
            <button class="btn btn-accent text-black-50 btn-icon mb-2"
                    mdbTooltip="{{ 'Edit Contract' | translate }}"
                    (click)="showEditInspectionModal(inspection)">
              <i class="material-icons">
                edit
              </i>
            </button>
            <button class="btn btn-danger text-black-50 btn-icon mb-2"
                    mdbTooltip="{{'Delete Contract' | translate}}"
            >
              <i class="material-icons">
                delete_forever
              </i>
            </button>
          </div>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
  <pagination-pn *ngIf="inspectionsModel?.total > inspectionsRequestModel.pageSize"
                 [limit]="inspectionsRequestModel.pageSize"
                 [size]="inspectionsModel.total"
                 [offset]="inspectionsRequestModel.offset"
                 (onPageChanged)="changePage($event)"></pagination-pn>
</div>

<app-inspections-add #createInspectionModal></app-inspections-add>
<app-inspections-update #editInspectionModal></app-inspections-update>
