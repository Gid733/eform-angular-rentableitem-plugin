<subheader-pn [title]="'Contracts' | translate">
  <div class="p-3">
    <button
      class="btn btn-success"
      mdbTooltip="{{'Create Contract' | translate}}"
      (click)="showCreateContractModal()">
      {{'New Contract'}}
    </button>
  </div>
</subheader-pn>

<div class="container-fluid">
  <div class="row p-3 table-responsive no-gutters">
    <table class="table table-sm table-striped text-center">
      <thead>
      <tr>
      <th scope="col" class="table-header-sortable" id="idSort"
          (click)="sortByColumn('Id',contractsRequestModel.isSortDsc = !contractsRequestModel.isSortDsc)">
        <div class="d-flex align-items-center justify-content-center">
          ID
          <i class="material-icons text-black-50" *ngIf="contractsRequestModel.sortColumnName != 'Id'">unfold_more</i>
          <i class="material-icons"
             *ngIf="contractsRequestModel.sortColumnName == 'Id' && !contractsRequestModel.isSortDsc">
            unfold_less</i>
          <i class="material-icons"
             *ngIf="contractsRequestModel.sortColumnName == 'Id' && contractsRequestModel.isSortDsc">expand_more</i>
        </div>
      </th>
      <th scope="col" class="table-header-sortable" id="startDateSort"
               (click)="sortByColumn('StartDate',contractsRequestModel.isSortDsc = !contractsRequestModel.isSortDsc)">
        <div class="d-flex align-items-center justify-content-center">
          Start Date
          <i class="material-icons text-black-50" *ngIf="contractsRequestModel.sortColumnName != 'StartDate'">
            unfold_more</i>
          <i class="material-icons"
             *ngIf="contractsRequestModel.sortColumnName == 'StartDate' && !contractsRequestModel.isSortDsc">
            unfold_less</i>
          <i class="material-icons"
             *ngIf="contractsRequestModel.sortColumnName == 'StartDate' && contractsRequestModel.isSortDsc">
            expand_more</i>
        </div>
      </th>
      <th scope="col" class="table-header-sortable" id="endDateSort"
               (click)="sortByColumn('EndDate',contractsRequestModel.isSortDsc = !contractsRequestModel.isSortDsc)">
        <div class="d-flex align-items-center justify-content-center">
          End Date
          <i class="material-icons text-black-50" *ngIf="contractsRequestModel.sortColumnName != 'EndDate'">
            unfold_more</i>
          <i class="material-icons"
             *ngIf="contractsRequestModel.sortColumnName == 'EndDate' && !contractsRequestModel.isSortDsc">
            unfold_less</i>
          <i class="material-icons"
             *ngIf="contractsRequestModel.sortColumnName == 'EndDate' && contractsRequestModel.isSortDsc">
            expand_more</i>
        </div>
      </th>
      <th scope="col" class="table-header-sortable" id="customerIdSort"
               (click)="sortByColumn('CustomerId',contractsRequestModel.isSortDsc = !contractsRequestModel.isSortDsc)">
        <div class="d-flex align-items-center justify-content-center">
         Customer ID
          <i class="material-icons text-black-50" *ngIf="contractsRequestModel.sortColumnName != 'CustomerId'">
            unfold_more</i>
          <i class="material-icons"
             *ngIf="contractsRequestModel.sortColumnName == 'CustomerId' && !contractsRequestModel.isSortDsc">
            unfold_less</i>
          <i class="material-icons"
             *ngIf="contractsRequestModel.sortColumnName == 'CustomerId' && contractsRequestModel.isSortDsc">
            expand_more</i>
        </div>
      </th>
      <th scope="col" class="table-header-sortable" id="contractNumberSort"
          (click)="sortByColumn('ContractNumber',contractsRequestModel.isSortDsc = !contractsRequestModel.isSortDsc)">
        <div class="d-flex align-items-center justify-content-center">
          Contract Number
          <i class="material-icons text-black-50" *ngIf="contractsRequestModel.sortColumnName != 'ContractNumber'">
            unfold_more</i>
          <i class="material-icons"
             *ngIf="contractsRequestModel.sortColumnName == 'ContractNumber' && !contractsRequestModel.isSortDsc">
            unfold_less</i>
          <i class="material-icons"
             *ngIf="contractsRequestModel.sortColumnName == 'ContractNumber' && contractsRequestModel.isSortDsc">
            expand_more</i>
        </div>
      </th>
        <th scope="col">
          {{ 'Actions' | translate }}
        </th>
      </tr>
      </thead>
      <tbody id="tableBody">
      <tr *ngFor="let contract of contractsModel?.contracts">
        <td>
          {{contract.id}}
        </td>
        <td>
          {{contract.contractStart}}
        </td>
        <td>
          {{contract.contractEnd}}
        </td>
        <td>
          {{contract.customerId}}
        </td>
        <td>
          {{contract.contractNr}}
        </td>
        <td>
          <div class="d-flex flex-row justify-content-center">
            <button class="btn btn-accent text-black-50 btn-icon mb-2"
                    mdbTooltip="{{ 'Edit Contract' | translate }}"
                    (click)="showEditContractModal(contract)">
              <i class="material-icons">
                edit
              </i>
            </button>
            <button class="btn btn-danger text-black-50 btn-icon mb-2"
                    mdbTooltip="{{'Delete Contract' | translate}}"
            >
              <i class="material-icons">
                delete_forever
              </i>
            </button>
          </div>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>

<app-contracts-add #createContractModal
(onContractCreated)="getAllContracts()"></app-contracts-add>
