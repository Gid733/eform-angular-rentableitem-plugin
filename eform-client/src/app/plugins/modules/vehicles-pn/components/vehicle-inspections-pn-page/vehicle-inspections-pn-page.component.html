<subheader-pn [title]="'Vehicle inspections' | translate">
  <div class="p-3">
    <button
      class="btn btn-success"
      mdbTooltip="{{ 'Create vehicle inspection' | translate }}"
      (click)="showCreateVehicleInspectionModal()">{{ 'New vehicle inspection' | translate }}
    </button>
  </div>
</subheader-pn>

<div class="container-fluid">
  <div class="row pt-3 table-responsive no-gutters">
    <table class="table table-sm table-striped text-center">
      <thead>
      <tr>
        <th scope="col" class="table-header-sortable" id="idSort"
            (click)="sortByColumn('Id', vehiclesRequestModel.isSortDsc = !vehiclesRequestModel.isSortDsc)">
          <div class="d-flex align-items-center justify-content-center">
            ID
            <i class="material-icons text-black-50" *ngIf="vehiclesRequestModel.sortColumnName != 'Id'">unfold_more</i>
            <i class="material-icons"
               *ngIf="vehiclesRequestModel.sortColumnName == 'Id' && !vehiclesRequestModel.isSortDsc">
              expand_less</i>
            <i class="material-icons"
               *ngIf="vehiclesRequestModel.sortColumnName == 'Id' && vehiclesRequestModel.isSortDsc">expand_more</i>
          </div>
        </th>
        <th scope="col" class="table-header-sortable" id="workflowStateSort"
            (click)="sortByColumn('WorkflowState', vehiclesRequestModel.isSortDsc = !vehiclesRequestModel.isSortDsc)">
          <div class="d-flex align-items-center justify-content-center">
            {{ 'Workflow State' | translate }}
            <i class="material-icons text-black-50" *ngIf="vehiclesRequestModel.sortColumnName != 'WorkflowState'">unfold_more</i>
            <i class="material-icons"
               *ngIf="vehiclesRequestModel.sortColumnName == 'WorkflowState' && !vehiclesRequestModel.isSortDsc">
              expand_less</i>
            <i class="material-icons"
               *ngIf="vehiclesRequestModel.sortColumnName == 'WorkflowState' && vehiclesRequestModel.isSortDsc">expand_more</i>
          </div>
        </th>
        <th scope="col" class="table-header-sortable" id="versionSort"
            (click)="sortByColumn('Version', vehiclesRequestModel.isSortDsc = !vehiclesRequestModel.isSortDsc)">
          <div class="d-flex align-items-center justify-content-center">
            {{ 'Version' | translate }}
            <i class="material-icons text-black-50" *ngIf="vehiclesRequestModel.sortColumnName != 'Version'">unfold_more</i>
            <i class="material-icons"
               *ngIf="vehiclesRequestModel.sortColumnName == 'Version' && !vehiclesRequestModel.isSortDsc">
              expand_less</i>
            <i class="material-icons"
               *ngIf="vehiclesRequestModel.sortColumnName == 'Version' && vehiclesRequestModel.isSortDsc">expand_more</i>
          </div>
        </th>
        <th scope="col" class="table-header-sortable" id="statusSort"
            (click)="sortByColumn('Status', vehiclesRequestModel.isSortDsc = !vehiclesRequestModel.isSortDsc)">
          <div class="d-flex align-items-center justify-content-center">
            {{ 'Status' | translate }}
            <i class="material-icons text-black-50" *ngIf="vehiclesRequestModel.sortColumnName != 'Status'">unfold_more</i>
            <i class="material-icons"
               *ngIf="vehiclesRequestModel.sortColumnName == 'Status' && !vehiclesRequestModel.isSortDsc">
              expand_less</i>
            <i class="material-icons"
               *ngIf="vehiclesRequestModel.sortColumnName == 'Status' && vehiclesRequestModel.isSortDsc">expand_more</i>
          </div>
        </th>
        <th scope="col" class="table-header-sortable" id="createdAtSort"
            (click)="sortByColumn('CreatedAt', vehiclesRequestModel.isSortDsc = !vehiclesRequestModel.isSortDsc)">
          <div class="d-flex align-items-center justify-content-center">
            {{ 'Created at' | translate }}
            <i class="material-icons text-black-50" *ngIf="vehiclesRequestModel.sortColumnName != 'CreatedAt'">unfold_more</i>
            <i class="material-icons"
               *ngIf="vehiclesRequestModel.sortColumnName == 'CreatedAt' && !vehiclesRequestModel.isSortDsc">
              expand_less</i>
            <i class="material-icons"
               *ngIf="vehiclesRequestModel.sortColumnName == 'CreatedAt' && vehiclesRequestModel.isSortDsc">expand_more</i>
          </div>
        </th>
        <th scope="col" class="table-header-sortable" id="updatedAt"
            (click)="sortByColumn('UpdatedAt', vehiclesRequestModel.isSortDsc = !vehiclesRequestModel.isSortDsc)">
          <div class="d-flex align-items-center justify-content-center">
            {{ 'Updated at' | translate }}
            <i class="material-icons text-black-50" *ngIf="vehiclesRequestModel.sortColumnName != 'UpdatedAt'">unfold_more</i>
            <i class="material-icons"
               *ngIf="vehiclesRequestModel.sortColumnName == 'UpdatedAt' && !vehiclesRequestModel.isSortDsc">
              expand_less</i>
            <i class="material-icons"
               *ngIf="vehiclesRequestModel.sortColumnName == 'UpdatedAt' && vehiclesRequestModel.isSortDsc">expand_more</i>
          </div>
        </th>
        <th scope="col" class="table-header-sortable" id="doneAt"
            (click)="sortByColumn('DoneAt', vehiclesRequestModel.isSortDsc = !vehiclesRequestModel.isSortDsc)">
          <div class="d-flex align-items-center justify-content-center">
            {{ 'Done at' | translate }}
            <i class="material-icons text-black-50" *ngIf="vehiclesRequestModel.sortColumnName != 'DoneAt'">unfold_more</i>
            <i class="material-icons"
               *ngIf="vehiclesRequestModel.sortColumnName == 'DoneAt' && !vehiclesRequestModel.isSortDsc">
              expand_less</i>
            <i class="material-icons"
               *ngIf="vehiclesRequestModel.sortColumnName == 'DoneAt' && vehiclesRequestModel.isSortDsc">expand_more</i>
          </div>
        </th>
        <th scope="col" class="table-header-sortable" id="eFormIdSort"
            (click)="sortByColumn('EformId', vehiclesRequestModel.isSortDsc = !vehiclesRequestModel.isSortDsc)">
          <div class="d-flex align-items-center justify-content-center">
            eForm ID
            <i class="material-icons text-black-50" *ngIf="vehiclesRequestModel.sortColumnName != 'EformId'">unfold_more</i>
            <i class="material-icons"
               *ngIf="vehiclesRequestModel.sortColumnName == 'EformId' && !vehiclesRequestModel.isSortDsc">
              expand_less</i>
            <i class="material-icons"
               *ngIf="vehiclesRequestModel.sortColumnName == 'EformId' && vehiclesRequestModel.isSortDsc">expand_more</i>
          </div>
        </th>
        <th scope="col" class="table-header-sortable" id="vehicleIdSort"
            (click)="sortByColumn('VehicleId', vehiclesRequestModel.isSortDsc = !vehiclesRequestModel.isSortDsc)">
          <div class="d-flex align-items-center justify-content-center">
            Vehicle ID
            <i class="material-icons text-black-50" *ngIf="vehiclesRequestModel.sortColumnName != 'VehicleId'">unfold_more</i>
            <i class="material-icons"
               *ngIf="vehiclesRequestModel.sortColumnName == 'VehicleId' && !vehiclesRequestModel.isSortDsc">
              expand_less</i>
            <i class="material-icons"
               *ngIf="vehiclesRequestModel.sortColumnName == 'VehicleId' && vehiclesRequestModel.isSortDsc">expand_more</i>
          </div>
        </th>


        <th scope="col">
          {{ 'Actions' | translate }}
        </th>
      </tr>
      </thead>
      <tbody id="tableBody">
      <tr *ngFor="let vehicleInspection of vehicleInspectionsModel.vehicleInspections">
        <td>
          {{vehicleInspection.id}}
        </td>
        <td>
          {{vehicleInspection.workflowState}}
        </td>
        <td>
          {{vehicleInspection.version}}
        </td>
        <td>
          {{vehicleInspection.status}}
        </td>
        <td>
          {{vehicleInspection.createdAt | date:'dd.MM.y'}}
        </td>
        <td>
          {{vehicleInspection.UpdatedAt | date:'dd.MM.y'}}
        </td>
        <td>
          {{vehicleInspection.DoneAt | date:'dd.MM.y'}}
        </td>
        <td>
          {{vehicleInspection.EformId}}
        </td>

        <td>
          {{vehicleInspection.VehicleId}}
        </td>

        <td>
          <div class="d-flex flex-row justify-content-center">
            <button class="btn btn-accent text-black-50 btn-icon mb-2"
                    mdbTooltip="{{ 'Edit vehicle inspection' | translate }}"
                    (click)="showEditVehicleInspectionModal(vehicleInspection)">
              <i class="material-icons">
                edit
              </i>
            </button>
          </div>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
  <pagination-pn *ngIf="vehicleInspectionsModel.total > vehiclesRequestModel.pageSize"
                 [limit]="vehiclesRequestModel.pageSize"
                 [size]="vehicleInspectionsModel.total"
                 [offset]="vehiclesRequestModel.offset"
                 (onPageChanged)="changePage($event)"></pagination-pn>
</div>

<spinner-pn [spinnerVisibility]="spinnerStatus"></spinner-pn>


