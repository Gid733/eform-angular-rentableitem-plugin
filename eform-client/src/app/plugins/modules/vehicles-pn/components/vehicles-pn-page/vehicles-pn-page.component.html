<header class="main-header main-header-title">
  <div class="container-fluid">
    <h1 class="page-title header-page-title">
      <div class="container">
        {{ 'Vehicles' | translate }}
      </div>
    </h1>
    <div class="pull-right">
      <button tooltip="{{ 'Create vehicle' | translate }}"
              class="needs_tooltip btn btn-ar btn-success"
              (click)="showCreateVehicleModal()"
              type="button" id="newEFormBtn">{{ 'New vehicle' | translate }}
      </button>
    </div>
  </div>
</header>

<div class="container-fluid">
  <vehicles-pn-pagination *ngIf="vehiclesModel.total > vehiclesRequestModel.pageSize"
                       [limit]="vehiclesRequestModel.pageSize"
                       [size]="vehiclesModel.total"
                       [offset]="vehiclesRequestModel.offset"
                       (onPageChanged)="changePage($event)"></vehicles-pn-pagination>
  <table border="0" cellpadding="0" cellspacing="0"
         class="table table-striped table-bordered table-condensed table-hover dataTable no-footer"
         id="units" style="width: 100%;">
    <thead>
    <tr role="row">
      <th class="text-center" rowspan="1" colspan="1"
          [class.sorting_asc]="vehiclesRequestModel.sortColumnName == 'Id' && !vehiclesRequestModel.isSortDsc"
          [class.sorting_desc]="vehiclesRequestModel.sortColumnName == 'Id' && vehiclesRequestModel.isSortDsc"
          [class.sorting]="vehiclesRequestModel.sortColumnName != 'Id'"
          (click)="sortByColumn('Id', vehiclesRequestModel.isSortDsc = !vehiclesRequestModel.isSortDsc)">
        ID
      </th>
      <th class="text-center" rowspan="1" colspan="1"
          [class.sorting_asc]="vehiclesRequestModel.sortColumnName == 'ContactNumber' && !vehiclesRequestModel.isSortDsc"
          [class.sorting_desc]="vehiclesRequestModel.sortColumnName == 'ContactNumber' && vehiclesRequestModel.isSortDsc"
          [class.sorting]="vehiclesRequestModel.sortColumnName != 'ContactNumber'"
          (click)="sortByColumn('ContactNumber', vehiclesRequestModel.isSortDsc = !vehiclesRequestModel.isSortDsc)">
        {{ 'Contact number' | translate }}
      </th>
      <th class="text-center" rowspan="1" colspan="1"
          [class.sorting_asc]="vehiclesRequestModel.sortColumnName == 'CustomerName' && !vehiclesRequestModel.isSortDsc"
          [class.sorting_desc]="vehiclesRequestModel.sortColumnName == 'CustomerName' && vehiclesRequestModel.isSortDsc"
          [class.sorting]="vehiclesRequestModel.sortColumnName != 'CustomerName'"
          (click)="sortByColumn('CustomerName', vehiclesRequestModel.isSortDsc = !vehiclesRequestModel.isSortDsc)">
        {{ 'Customer name' | translate }}
      </th>
      <th class="text-center" rowspan="1" colspan="1"
          [class.sorting_asc]="vehiclesRequestModel.sortColumnName == 'Brand' && !vehiclesRequestModel.isSortDsc"
          [class.sorting_desc]="vehiclesRequestModel.sortColumnName == 'Brand' && vehiclesRequestModel.isSortDsc"
          [class.sorting]="vehiclesRequestModel.sortColumnName != 'Brand'"
          (click)="sortByColumn('Brand', vehiclesRequestModel.isSortDsc = !vehiclesRequestModel.isSortDsc)">
        {{ 'Brand' | translate }}
      </th>
      <th class="text-center" rowspan="1" colspan="1"
          [class.sorting_asc]="vehiclesRequestModel.sortColumnName == 'ModelName' && !vehiclesRequestModel.isSortDsc"
          [class.sorting_desc]="vehiclesRequestModel.sortColumnName == 'ModelName' && vehiclesRequestModel.isSortDsc"
          [class.sorting]="vehiclesRequestModel.sortColumnName != 'ModelName'"
          (click)="sortByColumn('ModelName', vehiclesRequestModel.isSortDsc = !vehiclesRequestModel.isSortDsc)">
        {{ 'Model' | translate }}
      </th>
      <th class="text-center" rowspan="1" colspan="1"
          [class.sorting_asc]="vehiclesRequestModel.sortColumnName == 'RegistrationDate' && !vehiclesRequestModel.isSortDsc"
          [class.sorting_desc]="vehiclesRequestModel.sortColumnName == 'RegistrationDate' && vehiclesRequestModel.isSortDsc"
          [class.sorting]="vehiclesRequestModel.sortColumnName != 'RegistrationDate'"
          (click)="sortByColumn('RegistrationDate', vehiclesRequestModel.isSortDsc = !vehiclesRequestModel.isSortDsc)">
        {{ 'Registration date' | translate }}
      </th>
      <th class="text-center" rowspan="1" colspan="1"
          [class.sorting_asc]="vehiclesRequestModel.sortColumnName == 'VinNumber' && !vehiclesRequestModel.isSortDsc"
          [class.sorting_desc]="vehiclesRequestModel.sortColumnName == 'VinNumber' && vehiclesRequestModel.isSortDsc"
          [class.sorting]="vehiclesRequestModel.sortColumnName != 'VinNumber'"
          (click)="sortByColumn('VinNumber', vehiclesRequestModel.isSortDsc = !vehiclesRequestModel.isSortDsc)">
        {{ 'VIN number' | translate }}
      </th>
      <th class="text-center" rowspan="1" colspan="1"
          [class.sorting_asc]="vehiclesRequestModel.sortColumnName == 'ContractStartDate' && !vehiclesRequestModel.isSortDsc"
          [class.sorting_desc]="vehiclesRequestModel.sortColumnName == 'ContractStartDate' && vehiclesRequestModel.isSortDsc"
          [class.sorting]="vehiclesRequestModel.sortColumnName != 'ContractStartDate'"
          (click)="sortByColumn('ContractStartDate', vehiclesRequestModel.isSortDsc = !vehiclesRequestModel.isSortDsc)">
        {{ 'Start of contract' | translate }}
      </th>
      <th class="text-center" rowspan="1" colspan="1"
          [class.sorting_asc]="vehiclesRequestModel.sortColumnName == 'ContractEndDate' && !vehiclesRequestModel.isSortDsc"
          [class.sorting_desc]="vehiclesRequestModel.sortColumnName == 'ContractEndDate' && vehiclesRequestModel.isSortDsc"
          [class.sorting]="vehiclesRequestModel.sortColumnName != 'ContractEndDate'"
          (click)="sortByColumn('ContractEndDate', vehiclesRequestModel.isSortDsc = !vehiclesRequestModel.isSortDsc)">
        {{ 'End of contract' | translate }}
      </th>
      <th class="col-md-1 text-center" rowspan="1" colspan="1">
        {{ 'Actions' | translate }}
      </th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let vehicle of vehiclesModel.vehicles">
      <td class="text-center">
        {{vehicle.id}}
      </td>
      <td class="text-center">
        {{vehicle.contactNumber}}
      </td>
      <td class="text-center">
        {{vehicle.customerName}}
      </td>
      <td class="text-center">
        {{vehicle.brand}}
      </td>
      <td class="text-center">
        {{vehicle.modelName}}
      </td>
      <td class="text-center">
        {{vehicle.registrationDate | date:'dd.MM.y'}}
      </td>
      <td class="text-center">
        {{vehicle.vinNumber}}
      </td>
      <td class="text-center">
        {{vehicle.contractStartDate | date:'dd.MM.y'}}
      </td>
      <td class="text-center">
        {{vehicle.contractEndDate | date:'dd.MM.y'}}
      </td>
      <td class="text-center">
        <div class="row row-buttons-wrapper btn-group" role="group">
          <a class="needs_tooltip btn btn-ar btn-sm btn-default mt-edit-check-list-button"
             (click)="showEditVehicleModal(vehicle)"
             type="button" tooltip="{{ 'Edit vehicle' | translate }}">
            <span class="glyphicon glyphicon-list-alt"></span>
          </a>
        </div>
      </td>
    </tr>
    </tbody>
  </table>
  <div class="row" *ngIf="false">
    <div class="col-xs-6">
      <div class="dataTables_info"*ngIf="vehiclesModel.total > 0">
        {{ 'Showing to of records' |
        translate:{currentPageAmount: (this.vehiclesRequestModel.offset + 1),
        currentPage: getLastPageNumber(), total: vehiclesModel.total} }}
      </div>
    </div>
    <div class="col-xs-6"></div>
  </div>
  <vehicles-pn-spinner [middleActive]="spinnerStatus"></vehicles-pn-spinner>
</div>

<vehicles-pn-add-update-pn-page #vehiclePnAddUpdateComponent
                                (onVehicleCreatedUpdated)="getAllVehicles()"
                                [selectedVehicleModel]="selectedVehicleModel">
</vehicles-pn-add-update-pn-page>
