<subheader-pn [title]="'Vehicles' | translate">
  <div class="p-3">
    <button
      class="btn btn-success"
      mdbTooltip="{{ 'Create vehicle' | translate }}"
      (click)="showCreateVehicleModal()">{{ 'New vehicle' | translate }}
    </button>
  </div>
</subheader-pn>

<div class="container-fluid">
  <div class="row pt-3 table-responsive no-gutters">
    <table class="table table-sm table-striped text-center">
      <thead>
      <tr>
        <th scope="col" class="table-header-sortable" id="idSort"
            (click)="sortByColumn('Id', vehiclesRequestModel.isSortDsc = !vehiclesRequestModel.isSortDsc)">
          <div class="d-flex align-items-center justify-content-center">
            ID
            <i class="material-icons text-black-50" *ngIf="vehiclesRequestModel.sortColumnName != 'Id'">unfold_more</i>
            <i class="material-icons"
               *ngIf="vehiclesRequestModel.sortColumnName == 'Id' && !vehiclesRequestModel.isSortDsc">
              expand_less</i>
            <i class="material-icons"
               *ngIf="vehiclesRequestModel.sortColumnName == 'Id' && vehiclesRequestModel.isSortDsc">expand_more</i>
          </div>
        </th>
        <th scope="col" class="table-header-sortable" id="contactNumberSort"
            (click)="sortByColumn('ContactNumber', vehiclesRequestModel.isSortDsc = !vehiclesRequestModel.isSortDsc)">
          <div class="d-flex align-items-center justify-content-center">
            {{ 'Contact number' | translate }}
            <i class="material-icons text-black-50" *ngIf="vehiclesRequestModel.sortColumnName != 'ContactNumber'">unfold_more</i>
            <i class="material-icons"
               *ngIf="vehiclesRequestModel.sortColumnName == 'ContactNumber' && !vehiclesRequestModel.isSortDsc">
              expand_less</i>
            <i class="material-icons"
               *ngIf="vehiclesRequestModel.sortColumnName == 'ContactNumber' && vehiclesRequestModel.isSortDsc">expand_more</i>
          </div>
        </th>
        <th scope="col" class="table-header-sortable" id="customerNameSort"
            (click)="sortByColumn('CustomerName', vehiclesRequestModel.isSortDsc = !vehiclesRequestModel.isSortDsc)">
          <div class="d-flex align-items-center justify-content-center">
            {{ 'Customer name' | translate }}
            <i class="material-icons text-black-50" *ngIf="vehiclesRequestModel.sortColumnName != 'CustomerName'">unfold_more</i>
            <i class="material-icons"
               *ngIf="vehiclesRequestModel.sortColumnName == 'CustomerName' && !vehiclesRequestModel.isSortDsc">
              expand_less</i>
            <i class="material-icons"
               *ngIf="vehiclesRequestModel.sortColumnName == 'CustomerName' && vehiclesRequestModel.isSortDsc">expand_more</i>
          </div>
        </th>
        <th scope="col" class="table-header-sortable" id="brandSort"
            (click)="sortByColumn('Brand', vehiclesRequestModel.isSortDsc = !vehiclesRequestModel.isSortDsc)">
          <div class="d-flex align-items-center justify-content-center">
            {{ 'Brand' | translate }}
            <i class="material-icons text-black-50" *ngIf="vehiclesRequestModel.sortColumnName != 'Brand'">unfold_more</i>
            <i class="material-icons"
               *ngIf="vehiclesRequestModel.sortColumnName == 'Brand' && !vehiclesRequestModel.isSortDsc">
              expand_less</i>
            <i class="material-icons"
               *ngIf="vehiclesRequestModel.sortColumnName == 'Brand' && vehiclesRequestModel.isSortDsc">expand_more</i>
          </div>
        </th>
        <th scope="col" class="table-header-sortable" id="modelSort"
            (click)="sortByColumn('ModelName', vehiclesRequestModel.isSortDsc = !vehiclesRequestModel.isSortDsc)">
          <div class="d-flex align-items-center justify-content-center">
            {{ 'Model' | translate }}
            <i class="material-icons text-black-50" *ngIf="vehiclesRequestModel.sortColumnName != 'ModelName'">unfold_more</i>
            <i class="material-icons"
               *ngIf="vehiclesRequestModel.sortColumnName == 'ModelName' && !vehiclesRequestModel.isSortDsc">
              expand_less</i>
            <i class="material-icons"
               *ngIf="vehiclesRequestModel.sortColumnName == 'ModelName' && vehiclesRequestModel.isSortDsc">expand_more</i>
          </div>
        </th>
        <th scope="col" class="table-header-sortable" id="registerDateSort"
            (click)="sortByColumn('RegistrationDate', vehiclesRequestModel.isSortDsc = !vehiclesRequestModel.isSortDsc)">
          <div class="d-flex align-items-center justify-content-center">
            {{ 'Registration date' | translate }}
            <i class="material-icons text-black-50" *ngIf="vehiclesRequestModel.sortColumnName != 'RegistrationDate'">unfold_more</i>
            <i class="material-icons"
               *ngIf="vehiclesRequestModel.sortColumnName == 'RegistrationDate' && !vehiclesRequestModel.isSortDsc">
              expand_less</i>
            <i class="material-icons"
               *ngIf="vehiclesRequestModel.sortColumnName == 'RegistrationDate' && vehiclesRequestModel.isSortDsc">expand_more</i>
          </div>
        </th>
        <th scope="col" class="table-header-sortable" id="vinNumberSort"
            (click)="sortByColumn('VinNumber', vehiclesRequestModel.isSortDsc = !vehiclesRequestModel.isSortDsc)">
          <div class="d-flex align-items-center justify-content-center">
            {{ 'VIN number' | translate }}
            <i class="material-icons text-black-50" *ngIf="vehiclesRequestModel.sortColumnName != 'VinNumber'">unfold_more</i>
            <i class="material-icons"
               *ngIf="vehiclesRequestModel.sortColumnName == 'VinNumber' && !vehiclesRequestModel.isSortDsc">
              expand_less</i>
            <i class="material-icons"
               *ngIf="vehiclesRequestModel.sortColumnName == 'VinNumber' && vehiclesRequestModel.isSortDsc">expand_more</i>
          </div>
        </th>
        <th scope="col" class="table-header-sortable" id="contractStartDate"
            (click)="sortByColumn('ContractStartDate', vehiclesRequestModel.isSortDsc = !vehiclesRequestModel.isSortDsc)">
          <div class="d-flex align-items-center justify-content-center">
            {{ 'Start of contract' | translate }}
            <i class="material-icons text-black-50" *ngIf="vehiclesRequestModel.sortColumnName != 'ContractStartDate'">unfold_more</i>
            <i class="material-icons"
               *ngIf="vehiclesRequestModel.sortColumnName == 'ContractStartDate' && !vehiclesRequestModel.isSortDsc">
              expand_less</i>
            <i class="material-icons"
               *ngIf="vehiclesRequestModel.sortColumnName == 'ContractStartDate' && vehiclesRequestModel.isSortDsc">expand_more</i>
          </div>
        </th>
        <th scope="col" class="table-header-sortable" id="contractEndDate"
            (click)="sortByColumn('ContractEndDate', vehiclesRequestModel.isSortDsc = !vehiclesRequestModel.isSortDsc)">
          <div class="d-flex align-items-center justify-content-center">
            {{ 'End of contract' | translate }}
            <i class="material-icons text-black-50" *ngIf="vehiclesRequestModel.sortColumnName != 'ContractEndDate'">unfold_more</i>
            <i class="material-icons"
               *ngIf="vehiclesRequestModel.sortColumnName == 'ContractEndDate' && !vehiclesRequestModel.isSortDsc">
              expand_less</i>
            <i class="material-icons"
               *ngIf="vehiclesRequestModel.sortColumnName == 'ContractEndDate' && vehiclesRequestModel.isSortDsc">expand_more</i>
          </div>
        </th>
        <th scope="col">
          {{ 'Actions' | translate }}
        </th>
      </tr>
      </thead>
      <tbody id="tableBody">
      <tr *ngFor="let vehicle of vehiclesModel.vehicles">
        <td>
          {{vehicle.id}}
        </td>
        <td>
          {{vehicle.contactNumber}}
        </td>
        <td>
          {{vehicle.customerName}}
        </td>
        <td>
          {{vehicle.brand}}
        </td>
        <td>
          {{vehicle.modelName}}
        </td>
        <td>
          {{vehicle.registrationDate | date:'dd/MM/yyyy'}}
        </td>
        <td>
          {{vehicle.vinNumber}}
        </td>
        <td>
          {{vehicle.contractStartDate | date:'dd/MM/yyyy'}}
        </td>
        <td>
          {{vehicle.contractEndDate | date:'dd/MM/yyyy'}}
        </td>
        <td>
          <div class="d-flex flex-row justify-content-center">
            <button class="btn btn-accent text-black-50 btn-icon mb-2"
                    mdbTooltip="{{ 'Edit vehicle' | translate }}"
                    (click)="showEditVehicleModal(vehicle)">
              <i class="material-icons">
                edit
              </i>
            </button>
          </div>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
  <pagination-pn *ngIf="vehiclesModel.total > vehiclesRequestModel.pageSize"
                 [limit]="vehiclesRequestModel.pageSize"
                 [size]="vehiclesModel.total"
                 [offset]="vehiclesRequestModel.offset"
                 (onPageChanged)="changePage($event)"></pagination-pn>
</div>

<spinner-pn [spinnerVisibility]="spinnerStatus"></spinner-pn>

<app-vehicles-pn-add #createVehicleModal
                     (onVehicleCreated)="getAllVehicles()">
</app-vehicles-pn-add>
<app-vehicles-pn-update #editVehicleModal (onVehicleUpdated)="getAllVehicles()"></app-vehicles-pn-update>
